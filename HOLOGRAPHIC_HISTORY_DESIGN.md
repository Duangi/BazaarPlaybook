# 历史战绩页面 - 全息卡片流设计文档

## 概述
全新的历史战绩页面采用 **Mobalytics/Blitz 级别的极简全息卡片流设计**，彻底重构了视觉层次和交互体验。

## ✨ 核心设计理念

### 1. "去胶囊化" - 硬朗直线美学
- ❌ 抛弃：大圆角胶囊、鲜艳的大块红绿配色
- ✅ 采用：4-6px 微圆角、硬朗的矩形卡片、专业的点线式色彩提示

### 2. 色彩降噪 - 高级感配色
```python
胜利色：#00ECC3  # 薄荷绿/青色（仅作为侧边光条和强调色）
失败色：#F5503D  # 暗玫瑰红（仅作为侧边光条和强调色）
金色强调：#D4AF37  # 用于核心数据和重要信息
背景色系：
  - 最深黑：#0F0E0D  # 页面背景
  - 深褐黑：#1A1714  # 卡片背景
  - 高亮黑：#25211E  # Hover 状态
```

### 3. 层次分明的信息架构
采用三层视觉权重：
1. **最高优先级**：胜负状态、核心战绩数字（金色高亮）
2. **中优先级**：战绩流图标、英雄信息
3. **低优先级**：时间戳、小局详情

---

## 🎨 视觉模块详解

### 📊 未展开状态（60-70px 高）

#### 左侧装饰区
- **4px 垂直色条**
  - 胜利：薄荷绿 `#00ECC3`
  - 失败：暗玫瑰红 `#F5503D`
  - 视觉暗示强烈，一眼区分胜负

- **英雄头像**
  - 尺寸：36x36px 圆形
  - 边框：1px 金色 `#D4AF37`
  - 显示英雄名称首字母

#### 主信息区
- **胜负状态**
  ```css
  font-size: 18px
  font-weight: 900  /* 超粗体 */
  color: 胜利色/失败色
  ```

- **时间戳**
  ```css
  font-size: 11px
  color: #666  /* 低调灰色 */
  ```

#### 核心数据区
- **战绩统计** `"10 胜 - 2 负"`
  ```css
  font-size: 16px
  font-weight: bold
  color: #D4AF37  /* 金色突出 */
  ```

#### 战绩流图标（创新设计）
- **12x12px 极小图标**
  - ✓ 胜利：实心小圆点，填充薄荷绿
  - ✗ 失败：空心圆点，红色边框
  - 间距：4px
  - 最多显示 15 个，多余显示 `+N`

#### 右侧操作区
- **展开箭头** `∨` / `∧`
  - 简约符号，颜色 `#888`
  - 状态自动切换

---

### 📋 展开状态 - 详情面板

#### 小局列表
每一小局占据独立一行，背景色比头部更深，营造层次感。

##### 小局头部
- **ROUND 1** 
  ```css
  font-family: 'Consolas', 'Courier New', monospace
  font-size: 13px
  font-weight: 600
  color: #D4AF37
  letter-spacing: 1px  /* 字母间距增强科技感 */
  text-transform: uppercase  /* 全大写 */
  ```

- **状态图标** ✓ / ✗
  - 颜色匹配胜负色
  - 简洁明了

- **作战信息**
  - 第 N 天（灰色）
  - 时间戳（更浅的灰色）

##### 物品陈列区
- **紧凑横向排列**
  - 间距：4px（极致紧凑）
  - 边框：1px 半透明白色 `rgba(255, 255, 255, 0.3)`
  - 背景：纯黑 `#000`
  - 圆角：3px（轻微圆角，保持卡牌感）

- **尺寸比例优化**
  ```python
  base_height = 50px  # 缩小尺寸适配列表
  Small  → 25px 宽
  Medium → 50px 宽
  Large  → 75px 宽
  ```

- **物品悬浮提示**
  - 使用 Qt Tooltip 显示物品名称
  - 可扩展为黑金详情框（后续优化）

---

## 🎬 交互动画系统

### 1. 展开/收起动画
```python
动画引擎：QPropertyAnimation
目标属性：maximumHeight
持续时间：300ms
缓动曲线：QEasingCurve.OutQuint  # 平滑下拉，如同百叶窗
```

**视觉效果**：
- 展开时从 0 逐渐拉伸到完整高度
- 收起时平滑回缩到 0
- 箭头自动切换方向

### 2. Hover 悬浮效果
```python
进入 (enterEvent):
  - 背景：渐变从 #25211E 到 #1A1714
  - 边框透明度：0.1 → 0.3
  - 侧边色条：保持原色（已经是高亮色）

离开 (leaveEvent):
  - 恢复纯色背景 #1A1714
  - 边框透明度：0.3 → 0.1
```

**视觉效果**：
- 鼠标划过时，卡片轻微提亮
- 金色边框若隐若现
- 不刺眼，不喧宾夺主

### 3. 物品悬浮（已实现 Tooltip）
- 当前：显示物品名称
- 后续可扩展为：
  ```
  ┌────────────────────┐
  │ 🌟 传奇物品        │
  │ ─────────────────  │
  │ 攻击力：+50        │
  │ 暴击率：+15%       │
  │ ─────────────────  │
  │ "此剑可斩星辰"     │
  └────────────────────┘
  ```

---

## 🛠 技术实现亮点

### 1. 模块化卡片组件
```python
class MatchCard(QFrame):
    """独立的对局卡片组件"""
    - 自包含：数据、样式、动画
    - 可复用：任意位置实例化
    - 可扩展：易于添加新功能
```

### 2. 响应式尺寸计算
```python
# 根据物品大小自动计算缩放比例
if card_size == CardSize.SMALL:
    img_w = int(base_height * 0.5)
elif card_size == CardSize.LARGE:
    img_w = int(base_height * 1.5)
else:
    img_w = base_height
```

### 3. 动画状态管理
```python
# 展开/收起状态标记
self.is_expanded = False

# 动画完成后回调
self.expand_animation.finished.connect(
    lambda: self.details_widget.setVisible(False)
)
```

### 4. 性能优化
- 懒加载：详情面板默认隐藏，点击才展开
- 图片缓存：`ImageLoader` 自动缓存已加载图片
- 限制显示：战绩流最多显示 15 个图标，防止布局溢出

---

## 📐 设计规范

### 间距系统
```
页面边距：20px
卡片间距：8px
内容边距：20px（水平）, 12px（垂直）
元素间距：
  - 紧凑：4px（物品图标）
  - 标准：8-12px（文字元素）
  - 宽松：15px（主要区块）
```

### 字体系统
```
超大标题：26px, 粗体, 金色（页面标题）
大标题：18px, 超粗（胜负状态）
主内容：13-16px, 半粗/粗体（核心数据）
辅助信息：11-12px, 常规（时间、说明）
代码风格：Consolas/Courier, 13px（ROUND 标签）
```

### 圆角系统
```
卡片主体：6px（微圆角）
小组件：3-4px（物品图标、按钮）
圆形元素：50%（英雄头像、战绩流图标）
```

### 边框系统
```
主边框：1px solid rgba(212, 175, 55, 0.1)
强调边框（左侧色条）：4px solid 胜负色
物品边框：1px solid rgba(255, 255, 255, 0.3)
Hover 边框：1px solid rgba(212, 175, 55, 0.3)
```

---

## 🚀 使用方法

### 1. 自动集成
新页面已自动替换旧版本，无需手动切换：
```python
# gui/windows/sidebar_window.py
from gui.pages.history_page_holographic import HistoryPageHolographic as HistoryPage
```

### 2. 操作流程
1. 点击右上角「刷新」按钮加载历史战绩
2. 点击任意对局卡片展开详情
3. 再次点击收起详情
4. 鼠标悬停查看 Hover 效果
5. 悬停物品图标查看名称

### 3. 清除缓存
如果数据显示异常，点击「清除缓存」按钮重新分析日志。

---

## 🎯 设计对比

### 旧版本问题
❌ 大圆角胶囊形状显得廉价  
❌ 鲜艳的大块红绿配色刺眼  
❌ 信息优先级不明确  
❌ 控件样式偏旧，缺乏现代感  
❌ 战绩流以大图标显示，占用空间  

### 新版本优势
✅ 微圆角矩形卡片，专业硬朗  
✅ 点线式色彩提示，高级克制  
✅ 清晰的三级信息层次  
✅ 极简全息风格，科技感十足  
✅ 12x12px 极小图标，信息密度高  
✅ 平滑动画，交互流畅  
✅ 黑金配色，低调奢华  

---

## 📊 视觉效果预览

```
┌──────────────────────────────────────────────────────────────────┐
│  历史战绩                                   [清除缓存]  [刷新]      │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┃  👤  胜利        10 胜 - 2 负  ✓✓✓✓✓✓✓✗✗✓✓✓           ∨       │
│  ┃     14:20:05                                                 │
│  ┃                                                              │
│  ├──────────────────────────────────────────────────────────────┤
│  │  ROUND 1 ✓  第3天  14:20:10                                 │
│  │  [物品1][物品2][物品3][物品4][物品5]                          │
│  ├──────────────────────────────────────────────────────────────┤
│  │  ROUND 2 ✓  第3天  14:20:25                                 │
│  │  [物品1][物品2][物品3][物品4]                                 │
│  └──────────────────────────────────────────────────────────────┘
│                                                                  │
│  ┃  👤  失败        8 胜 - 4 败  ✓✓✓✓✗✓✗✓✓✗✗✓            ∨       │
│  ┃     13:45:12                                                 │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

## 🔮 后续优化计划

### Phase 2: 增强悬浮详情
- [ ] 物品悬浮显示完整属性卡片
- [ ] 卡片显示品级、属性、描述
- [ ] 黑金主题详情框

### Phase 3: 数据可视化
- [ ] 胜率折线图
- [ ] 物品使用频率热力图
- [ ] 英雄胜率统计

### Phase 4: 高级筛选
- [ ] 按英雄筛选
- [ ] 按胜负筛选
- [ ] 按时间范围筛选
- [ ] 搜索功能

### Phase 5: 导出分享
- [ ] 导出为图片
- [ ] 导出为 JSON
- [ ] 一键复制战绩链接

---

## 🎨 设计灵感来源

- **Mobalytics**：数据可视化、卡片流布局
- **Blitz**：极简色彩系统、硬朗线条
- **Apple Design**：克制的动画、精致的圆角系统
- **Cyberpunk UI**：全息感、科技感、黑金配色

---

## 📝 更新日志

### v1.0.0 - 2026-02-09
- ✨ 全新的全息卡片流设计
- 🎨 重构色彩系统（薄荷绿/暗玫瑰红/金色）
- 🎬 添加平滑展开/收起动画
- 💫 实现 Hover 悬浮效果
- 🏷️ 优化物品图标显示
- 📊 创新性的战绩流可视化

---

**享受全新的历史战绩体验！** 🚀
